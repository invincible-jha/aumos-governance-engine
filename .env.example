# ============================================================================
# .env.example — aumos-governance-engine
# Copy to .env and fill in values for local development.
# NEVER commit .env to version control.
# All variables use the AUMOS_GOVERNANCE_ prefix for governance-specific settings.
# Standard AumOS variables (AUMOS_DATABASE_URL, AUMOS_KAFKA_*) are also required.
# ============================================================================

# ---------------------------------------------------------------------------
# Standard AumOS settings (inherited from aumos-common AumOSSettings)
# ---------------------------------------------------------------------------

# Primary PostgreSQL database (governance policies, workflows, evidence)
AUMOS_DATABASE_URL=postgresql+asyncpg://aumos:aumos_dev@localhost:5432/aumos_governance

# Kafka bootstrap servers
AUMOS_KAFKA_BOOTSTRAP_SERVERS=localhost:9092

# Keycloak / Auth Gateway
AUMOS_KEYCLOAK_URL=http://localhost:8080
AUMOS_KEYCLOAK_REALM=aumos
AUMOS_KEYCLOAK_CLIENT_ID=aumos-governance-engine

# Redis (used for policy evaluation result caching)
AUMOS_REDIS_URL=redis://localhost:6379/0

# Service environment
AUMOS_ENVIRONMENT=development
AUMOS_LOG_LEVEL=DEBUG

# ---------------------------------------------------------------------------
# Governance-specific settings (AUMOS_GOVERNANCE_ prefix)
# ---------------------------------------------------------------------------

# AUDIT WALL — SEPARATE PostgreSQL instance for immutable audit trail
# This MUST be a different database server/instance from AUMOS_DATABASE_URL
# The DB user must have only INSERT + SELECT on gov_audit_trail_entries
AUMOS_GOVERNANCE_AUDIT_DB_URL=postgresql+asyncpg://aumos_audit:audit_dev_secret@localhost:5433/aumos_audit

# Audit DB connection pool configuration
AUMOS_GOVERNANCE_AUDIT_DB_POOL_SIZE=5
AUMOS_GOVERNANCE_AUDIT_DB_MAX_OVERFLOW=2
AUMOS_GOVERNANCE_AUDIT_DB_POOL_TIMEOUT=30

# OPA (Open Policy Agent) REST API endpoint
# OPA runs as a sidecar and exposes a REST API for policy evaluation
AUMOS_GOVERNANCE_OPA_URL=http://localhost:8181

# OPA policy evaluation timeout in milliseconds
# Hard SLA: evaluations exceeding this threshold trigger a warning log
AUMOS_GOVERNANCE_POLICY_EVAL_TIMEOUT_MS=200

# OPA bundle prefix used when uploading Rego policies
# Policies are uploaded to /v1/policies/{prefix}/{policy_id}
AUMOS_GOVERNANCE_OPA_BUNDLE_PREFIX=aumos/governance

# Evidence artifact storage (S3-compatible bucket)
AUMOS_GOVERNANCE_EVIDENCE_ARTIFACT_BUCKET=aumos-governance-evidence
AUMOS_GOVERNANCE_EVIDENCE_ARTIFACT_ENDPOINT=http://localhost:9000
AUMOS_GOVERNANCE_EVIDENCE_ARTIFACT_ACCESS_KEY=minioadmin
AUMOS_GOVERNANCE_EVIDENCE_ARTIFACT_SECRET_KEY=minioadmin

# Compliance assessment scheduler
# Cron expression for when automated assessments run
AUMOS_GOVERNANCE_ASSESSMENT_CRON=0 2 * * *

# Regulation mapping cache TTL in seconds
AUMOS_GOVERNANCE_REG_MAPPING_CACHE_TTL=3600

# ---------------------------------------------------------------------------
# Service identity
# ---------------------------------------------------------------------------
AUMOS_GOVERNANCE_SERVICE_NAME=aumos-governance-engine
AUMOS_GOVERNANCE_SERVICE_VERSION=0.1.0
